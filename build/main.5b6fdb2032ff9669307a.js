(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&!t;)t=r[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();var t=document.getElementById("player-deck"),n=document.getElementById("bot-deck"),r=document.getElementById("deck"),i=document.getElementById("table"),a=document.getElementById("pass-button"),o=document.getElementById("discarded-button"),l=document.getElementById("bot-message"),s=document.getElementById("i-take-button"),c=document.getElementById("player-and-bot-turn-p"),d=document.getElementById("win-text"),u=document.getElementById("bot-thinks"),h=document.getElementById("cards-count");t.addEventListener("wheel",(function(e){e.deltaMode===e.DOM_DELTA_PIXEL&&(t.scrollLeft+=e.deltaY,e.preventDefault())})),n.addEventListener("wheel",(function(e){e.deltaMode===e.DOM_DELTA_PIXEL&&(n.scrollLeft+=e.deltaY,e.preventDefault())}));const f=function(e){var t={target:"confetti-holder",max:80,size:1,animate:!0,respawn:!0,props:["circle","square","triangle","line"],colors:[[165,104,246],[230,61,135],[0,199,228],[253,214,126]],clock:25,interval:null,rotate:!1,start_from_edge:!1,width:window.innerWidth,height:window.innerHeight};if(e&&(e.target&&(t.target=e.target),e.max&&(t.max=e.max),e.size&&(t.size=e.size),void 0!==e.animate&&null!==e.animate&&(t.animate=e.animate),void 0!==e.respawn&&null!==e.respawn&&(t.respawn=e.respawn),e.props&&(t.props=e.props),e.colors&&(t.colors=e.colors),e.clock&&(t.clock=e.clock),void 0!==e.start_from_edge&&null!==e.start_from_edge&&(t.start_from_edge=e.start_from_edge),e.width&&(t.width=e.width),e.height&&(t.height=e.height),void 0!==e.rotate&&null!==e.rotate&&(t.rotate=e.rotate)),"object"!=typeof t.target&&"string"!=typeof t.target)throw new TypeError("The target parameter should be a node or string");if("object"==typeof t.target&&(null===t.target||!t.target instanceof HTMLCanvasElement)||"string"==typeof t.target&&(null===document.getElementById(t.target)||!document.getElementById(t.target)instanceof HTMLCanvasElement))throw new ReferenceError("The target element does not exist or is not a canvas element");var n="object"==typeof t.target?t.target:document.getElementById(t.target),r=n.getContext("2d"),i=[];function a(e,t){e||(e=1);var n=Math.random()*e;return t?Math.floor(n):n}var o=t.props.reduce((function(e,t){return e+(t.weight||1)}),0);function l(e){if(e){var n=e.radius<=3?.4:.8;switch(r.fillStyle=r.strokeStyle="rgba("+e.color+", "+n+")",r.beginPath(),e.prop){case"circle":r.moveTo(e.x,e.y),r.arc(e.x,e.y,e.radius*t.size,0,2*Math.PI,!0),r.fill();break;case"triangle":r.moveTo(e.x,e.y),r.lineTo(e.x+e.angles[0]*t.size,e.y+e.angles[1]*t.size),r.lineTo(e.x+e.angles[2]*t.size,e.y+e.angles[3]*t.size),r.closePath(),r.fill();break;case"line":r.moveTo(e.x,e.y),r.lineTo(e.x+e.line*t.size,e.y+5*e.radius),r.lineWidth=2*t.size,r.stroke();break;case"square":r.save(),r.translate(e.x+15,e.y+5),r.rotate(e.rotation),r.fillRect(-15*t.size,-5*t.size,15*t.size,5*t.size),r.restore();break;case"svg":r.save();var i=new window.Image;i.src=e.src;var a=e.size||15;r.translate(e.x+a/2,e.y+a/2),e.rotate&&r.rotate(e.rotation),r.drawImage(i,-a/2*t.size,-a/2*t.size,a*t.size,a*t.size),r.restore()}}}var s=function(){t.animate=!1,clearInterval(t.interval),requestAnimationFrame((function(){r.clearRect(0,0,n.width,n.height);var e=n.width;n.width=1,n.width=e}))};return{render:function(){n.width=t.width,n.height=t.height,i=[];for(var e=0;e<t.max;e++)i.push((c=void 0,c=t.props[function(){for(var e=Math.random()*o,n=0;n<t.props.length;++n){var r=t.props[n].weight||1;if(e<r)return n;e-=r}}()],{prop:c.type?c.type:c,x:a(t.width),y:t.start_from_edge?t.clock>=0?-10:parseFloat(t.height)+10:a(t.height),src:c.src,radius:a(4)+1,size:c.size,rotate:t.rotate,line:Math.floor(a(65)-30),angles:[a(10,!0)+2,a(10,!0)+2,a(10,!0)+2,a(10,!0)+2],color:t.colors[a(t.colors.length,!0)],rotation:a(360,!0)*Math.PI/180,speed:a(t.clock/7)+t.clock/30}));var c;return requestAnimationFrame((function e(){for(var n in r.clearRect(0,0,t.width,t.height),i)l(i[n]);!function(){for(var e=0;e<t.max;e++){var n=i[e];n&&(t.animate&&(n.y+=n.speed),n.rotate&&(n.rotation+=n.speed/35),(n.speed>=0&&n.y>t.height||n.speed<0&&n.y<0)&&(t.respawn?(i[e]=n,i[e].x=a(t.width,!0),i[e].y=n.speed>=0?-10:parseFloat(t.height)):i[e]=void 0))}i.every((function(e){return void 0===e}))&&s()}(),t.animate&&requestAnimationFrame(e)}))},clear:s}},g=e.p+"aa7ed98eeac8ef0f0c9b.svg";var m=function(e){document.getElementById("win-btn").className+=!e&&" blue";var t=document.getElementById("win-canvas");new f({target:t,rotate:!0,start_from_edge:!0,max:e?15:60,props:e?[{type:"svg",src:g,size:45,weight:1}]:["circle","square","triangle","line"]}).render(),setTimeout((function(){document.getElementById("win-section").style.display="flex"}),1e3)};document.getElementById("win-btn").addEventListener("click",(function(){window.location.reload()}));var p=function(e,t){"♥"===e.slice(-1)?t.className+=" red":"♣"===e.slice(-1)?t.className+=" green":"♦"===e.slice(-1)?t.className+=" blue":t.className+=" black"},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r=["6","7","8","9","10","J","Q","K","A"],i=["♠","♥","♦","♣"].filter((function(e){return e!==_}));i.push(_);var a=r.indexOf(e.slice(0,-1)),o=i.indexOf(e.slice(-1)),l=r.indexOf(t.slice(0,-1)),s=i.indexOf(t.slice(-1));return"botAttack"===n||o===s?a-l:o-s},y=function(e){return S.length?S.includes(e.slice(0,-1)):(S.push(e.slice(0,-1)),!0)},b=function(e,t){var n=["6","7","8","9","10","J","Q","K","A"];return n.indexOf(e)>n.indexOf(t)},w=function(e,t,n){var r=e.slice(0,-1),i=e.slice(-1),a=t.slice(0,-1),o=t.slice(-1),l=i===n,s=o===n;return!(!l||s)||(l&&s?b(r,a):l||s?!(!l&&s)&&void 0:i===o&&b(r,a))},E=function(e){e?(u.className="active",i.style.pointerEvents="none"):(u.className="",i.style.pointerEvents="")},x=function(){N.length||(j.length?F.length||(d.innerHTML="Bot won",d.className+=" red",m(!0)):(d.innerHTML="Player won",d.className+=" blue",m(!1)))};function I(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function e(){(!A&&C.length||A)&&E(!0),setTimeout((function(){if(z&&!M)for(var t=0;t<O.length;t++)for(var r=0;r<F.length;r++){if(w(F[r],O[t],_)){O.splice(O[t],1),C.push(F[r]),S.push(F[r].slice(0,-1)),n.children[r].className="card defense",p(F[r],n.children[r]),i.children[H.length-1].appendChild(n.children[r]),F.splice(r,1),O.length||(o.style.display="block");break}o.style.display="",r+1===F.length&&(M=!0,D())}else if(A){var a=I(F);a.sort((function(e,t){return v(e,t,"botAttack")})),a=a.filter((function(e){return!e.endsWith(_)})),a.length||(a=I(F.sort((function(e,t){return v(e,t,"botAttack")}))));var l=a[0];if(P.length){a=[];for(var s=0;s<F.length;s++)y(F[s])&&a.push(F[s]);l=a[0]}if(O.length||void 0!==l||(Y(),$(!1),K(!0),o.style.display="none",Q(!0),J()),void 0===l)return E(!1);if(P.length<6&&y(l)){var c=document.querySelector("[data-card='".concat(l,"']"));c.className="card attack",p(l,c),i.children[P.length].appendChild(c),P.push(l),C.push(l),O.push(l);var d=F.indexOf(l);F.splice(d,1),e()}else P.length>5&&!O.length&&(Y(),$(!1),K(!0),o.style.display="none",Q(!0),J())}x(),E(!1)}),1e3)},T=function(){for(var e=0;e<t.children.length;e++)t.children[e].style.border="",t.children[e].style.scale="",t.children[e].style.margin=""};function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A,z,M,_,N=[],S=[],C=[],O=[],H=[],P=[],j=[],F=[],R=function(){r.innerHTML="";for(var e=0;e<N.length;e++){var t=N[e],n=document.createElement("div");n.innerHTML="\n    <div class='top'>".concat(t,"</div>\n    <div class='suit'>").concat(t.slice(-1),"</div>\n    <div class='bottom'>").concat(t,"</div>\n  "),n.dataset.card=t,n.className=e+1<N.length?"card hide":"card visible",p(t,n),e+1<N.length&&(n.style.transform="translate(".concat(-e/5,"px, ").concat(-e/5,"px )")),r.appendChild(n)}N.length?h.innerHTML=N.length+"":(h.innerHTML=_,h.style.fontSize="40px",h.style.top="50%",h.style.transform="translateY(-50%)")},q=function(e,r){var i=e===j?t:n;if(i.innerHTML="",Array.isArray(r))for(var a=0;a<r.length;a++)e.push(r[a]);else if("number"==typeof r)for(var o=0;o<r&&N.length;o++){var l=N.shift();void 0!==l&&e.push(l)}e.sort(v);for(var s=0;s<e.length;s++){var c=document.createElement("div");c.innerHTML="\n  <div class='top'>".concat(e[s],"</div>\n  <div class='suit'>").concat(e[s].slice(-1),"</div>\n  <div class='bottom'>").concat(e[s],"</div>\n"),c.dataset.card=e[s],c.className=i===n?"card hide":"card visible",p(e[s],c),i.appendChild(c)}R()},Y=function(){A?(q(F,6-F.length),q(j,6-j.length)):(q(j,6-j.length),q(F,6-F.length))},D=function(){A?(c.innerText="Bot's turn",s.style.display="block"):(c.innerText="Your turn",s.style.display="none"),M?(l.innerText="I Take",a.style.display="block"):l.innerText=""},J=function(){H.length=0,P.length=0,O.length=0,C.length=0,S.length=0,D()},K=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(document.querySelectorAll("#table .card"));try{var n=function(){var t=e.value;t.className+=" trash",t.style.left=t.getBoundingClientRect().x+"px",t.style.top=t.getBoundingClientRect().y+"px",document.body.append(t),setTimeout((function(){t.remove()}),1e3)};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}}for(var r=0;r<i.children.length;r++)i.children[r].innerHTML=""};function Q(e){z=e}function $(e){A=e}a.addEventListener("click",(function(){q(F,C),K(),q(j,6-j.length),a.style.display="none",M=!1,J()})),o.addEventListener("click",(function(){K(!0),Y(),o.style.display="none",A=!0,z=!1,J(),k()})),s.addEventListener("click",(function(){q(j,C),K(),q(F,6-F.length),s.style.display="none",o.style.display="none",A=!0,z=!1,J(),k()}));const X=e.p+"acd9d0276e8ec92bf543.svg",W=e.p+"77d8d18f93543f661232.svg",U=e.p+"ca7869ef10fcd9db17cd.svg",G=e.p+"2bbe5751557b07ea5247.svg";var V=document.getElementById("game-canvas");new f({target:V,rotate:!0,start_from_edge:!0,max:8,clock:1,props:[{type:"svg",src:X,size:25,weight:1},{type:"svg",src:W,size:22,weight:1},{type:"svg",src:U,size:20,weight:1},{type:"svg",src:G,size:20,weight:1}]}).render();document.getElementById("start-game-button").addEventListener("click",(function(){var e,n,r,a,o,l,s,c,d,u,f;document.getElementById("start-section").style.display="none",document.getElementById("game-section").style.display="grid",A=Boolean(Math.floor(2*Math.random())),function(e){e.length=0,e.push("6♠","7♠","8♠","9♠","10♠","J♠","Q♠","K♠","A♠","6♣","7♣","8♣","9♣","10♣","J♣","Q♣","K♣","A♣","6♥","7♥","8♥","9♥","10♥","J♥","Q♥","K♥","A♥","6♦","7♦","8♦","9♦","10♦","J♦","Q♦","K♦","A♦");for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}}(N),_=N[N.length-1].slice(-1),p(" "+_,h),R(),q(j,6),q(F,6),J(),k(),d=function(e){((l=Boolean(e.touches))?e.touches[0].target:e.target).classList.contains("card")&&(n=e.target,o=l?e.touches[0].clientY:e.clientY,n.style.border="1px solid rgb(255, 255, 255)",n.style.scale="0.9",n.style.margin="0 10px",l?document.addEventListener("touchmove",u):document.addEventListener("mousemove",u))},u=function(i){if(s=l?i.touches[0].clientX:i.clientX,c=l?i.touches[0].clientY:i.clientY,e)return e.style.left=s-r+"px",e.style.top=c-a+"px",e.style.zIndex="2",void(e.style.position="fixed");if(t.getBoundingClientRect().y>c&&n&&!e){e=n,n=null;var d=e.getBoundingClientRect();r=d.width/2,a=d.height/2}else n&&n!==document.elementFromPoint(s,o)&&document.elementFromPoint(s,o).classList.contains("card")&&(T(),(n=document.elementFromPoint(s,o)).style.border="1px solid rgb(255, 255, 255)",n.style.scale="0.9",n.style.margin="0 10px")},f=function(t){if(document.removeEventListener("mousemove",u),document.removeEventListener("touchmove",u),T(),e){e.style.display="none";var r=document.elementFromPoint(s,c);if(r.classList.contains("card")&&(r=r.parentElement),e.style.display="",r.childNodes.length<2){var a=i.getBoundingClientRect();if(s>=a.left&&s<=a.right&&c>=a.top&&c<=a.bottom&&r.classList.contains("table__card-holder")){var o=e.dataset.card;if(!A&&H.length<6&&y(o)){e.className="card attack",p(o,e),i.children[H.length].appendChild(e),H.push(o),C.push(o),O.push(o);var l=j.indexOf(o);j.splice(l,1),Q(!0),k(),D()}else if(A&&r.childNodes.length){var d=r.firstChild.dataset.card;w(o,d,_)&&(O.splice(O.indexOf(d),1),C.push(o),S.push(o.slice(0,-1)),e.className="card defense",p(o,e),r.appendChild(e),j.splice(j.indexOf(o),1),k(),D())}}}e.style.left="",e.style.top="",e.style.zIndex="",e.style.position="",e=null,n=null,x()}},t.addEventListener("mousedown",d),t.addEventListener("touchstart",d),document.addEventListener("mouseup",f),document.addEventListener("touchend",f)}))})();